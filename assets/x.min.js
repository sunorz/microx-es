function updateTimeElements(){const e=document.querySelectorAll("span.time"),t=new Date,n=document.querySelector(".notice"),o=t.getDate(),s=document.querySelectorAll(".tweet");n&&(o>20&&s.length<5?n.style.display="block":n.style.display="none"),e.forEach(e=>{const n=e.textContent.trim(),o=new Date(n.replace(/-/g,"/"));if(isNaN(o.getTime()))return;const s=t-o,l=Math.floor(s/1e3),i=Math.floor(l/60),a=Math.floor(i/60),r=Math.floor(a/24);let c;if(l<60)c="Now";else if(i<60)c=`${i}m`;else if(a<24)c=`${a}h`;else if(r<7)c=`${r}d`;else{const e=o.getFullYear(),t=o.getMonth()+1,n=o.getDate();c=`${e}/${t}/${n}`}e.textContent=c})}function rotateImage(e){const t=e.querySelector("img");t.src="/images/load2.svg"}function stopAnimation(){if(animationId&&(clearTimeout(animationId),animationId=null),minLoadTimer&&(clearTimeout(minLoadTimer),minLoadTimer=null),currentAudio&&currentAudio._onReady&&(currentAudio.removeEventListener("canplay",currentAudio._onReady),delete currentAudio._onReady),currentPlayer){const e=currentPlayer.querySelector(".bars"),t=currentPlayer.querySelector(".play-icon");e.style.display="none",t.style.display="block",t.innerHTML='<svg viewBox="0 0 100 100" width="60" height="60" xmlns="http://www.w3.org/2000/svg">\n                <path class="playsvg" d=" M 20 15 Q 20 10 25 13 L 85 48 Q 90 50 85 52 L 25 87 Q 20 90 20 85 Z"/></svg>';const n=e.querySelectorAll(".bar");n.forEach(e=>e.style.height="30px"),currentAudio&&(currentAudio.pause(),currentAudio.currentTime=0),currentPlayer=null,currentAudio=null}}function startRandomAnimation(e,t,n){function o(){t.forEach(e=>{const t=Math.floor(20*Math.random())+5;e.style.height=`${t}px`}),animationId=setTimeout(o,200)}e.style.display="flex",n.style.display="none",o()}function isMobile(){return window.innerWidth<=600}function positionTooltip(){if(isMobile())tooltip.classList.add("show");else{const e=badge.getBoundingClientRect(),t=window.scrollY||document.documentElement.scrollTop,n=window.scrollX||document.documentElement.scrollLeft,o=8,s=-100;tooltip.style.top=`${e.bottom+t+o}px`,tooltip.style.left=`${e.left+n+s}px`}}function showTooltip(){positionTooltip(),tooltip.style.display="block"}function hideTooltip(){tooltip.style.display="none",tooltip.classList.remove("show")}function hasVisibleDynamicMask(){const e=document.querySelectorAll(".custom-confirm-mask");for(const t of e){const e="none"!==window.getComputedStyle(t).display,n="hidden"!==window.getComputedStyle(t).visibility;if(e&&n&&t.offsetWidth>0&&t.offsetHeight>0)return!0}const t=document.getElementById("preview-modal");if(t){const e="none"!==window.getComputedStyle(t).display,n="hidden"!==window.getComputedStyle(t).visibility;if(e&&n&&t.offsetWidth>0&&t.offsetHeight>0)return!0}return!1}function controlTabsByTweetCount(){const e=document.querySelectorAll(".tweet"),t=document.querySelectorAll(".twi-tabs");if(e.length<4?t.length>1&&(t[1].style.display="none"):t.length>1&&(t[1].style.display=""),0===e.length){const e=document.querySelector(".notice");if(e){if("block"===window.getComputedStyle(e).display)return!1;const t=e.querySelectorAll("div");t.length>=2&&(t[1].innerHTML="No tweets have been posted."),e.style.display="block"}}}const date=new Date;document.write(date.getFullYear()),document.addEventListener("DOMContentLoaded",updateTimeElements),setInterval(updateTimeElements,6e4),document.addEventListener("DOMContentLoaded",function(){function e(e){const t=e.parentElement,n=e.getBoundingClientRect(),o=t.getBoundingClientRect(),l=n.left-o.left,i=n.width;s.style.transform=`translateX(${l}px)`,s.style.width=`${i}px`}function t(e){return e<1e3?e:e<1e6?`${(e/1e3).toFixed(1)}K`:e<1e9?`${(e/1e6).toFixed(1)}M`:`${(e/1e9).toFixed(2)}B`}function n(){const e=new Date(Date.UTC(2025,4,1,16,0,0)),t=new Date,n=Math.floor((t.getTime()-e.getTime())/864e5),o=10,s=.5,l=465,i=9455,a=(83621-o*l-s*i)/31;let r=0;for(let e=0;e<=n;e++){const t=a+e*o+e*e*s;r+=t}return Math.floor(r)}const o=document.querySelectorAll(".twi-tabs"),s=document.querySelector(".tab-underline"),l=document.querySelector(".all"),i=document.querySelector(".twi-comment"),a=document.querySelector(".bottom-banner"),r=document.querySelectorAll(".all .tweet");o.forEach((t,n)=>{t.addEventListener("click",function(){o.forEach(e=>e.classList.remove("active")),this.classList.add("active"),e(this),0===n&&l?(a&&(a.innerText="tweet"),l.style.display="block",i&&(i.style.display="none"),r.forEach((e,t)=>{e.style.display=t<3?"block":"none"})):1===n&&l&&(a&&(a.innerText="monthly"),l.style.display="block",i&&(i.style.display="none"),r.forEach(e=>{e.style.display="block"}))}),o.length>0&&l&&o[0].click()});const c=t(n());document.getElementById("followers").textContent=c;let d=!0;const m=["jpg","jpeg","png","gif","webp","avif"],u=["mp4","mov","webm","m3u8"];document.querySelectorAll(".loading").forEach(e=>{"IMG"!==e.tagName&&"VIDEO"!==e.tagName||e.removeAttribute("src"),e.addEventListener("click",async function(){async function e(e){try{const t=new AbortController,n=setTimeout(()=>t.abort(),1e4),o=await fetch(e,{method:"HEAD",credentials:"include",signal:t.signal});return clearTimeout(n),o.status}catch(e){return"AbortError"===e.name?-1:0}}function t(e,t){if(!t)return;const n=e.match(/^([^-]+)-/);if(!n)return;const o=n[1],l=`/images/private/${o}.md`;fetch(l,{method:"HEAD"}).then(e=>{if(e.ok)return fetch(l,{credentials:"include"}).then(e=>e.text()).then(e=>{const t=document.createElement("div");t.className="media-c",t.innerHTML=e,s.appendChild(t)})})}if(this.classList.contains("loading-in-progress"))return;const n=this.getAttribute("data-media"),o=this.getAttribute("data-copyright");if(!n||0===n.length)return void setTimeout(()=>{this.classList.remove("loading-in-progress"),this.classList.remove("loading"),this.innerHTML='<div class="load-insert load-msg"><img class="load-icon" src="images/error.svg"></div>';let e=this.querySelector(".load-insert");e.style.setProperty("--load-text",'"Error 500"')},5e3);if(!this.classList.contains("loading"))return;o&&"off"===o&&(d=!1),this.classList.add("loading-in-progress");const s=this,l=n.split(",").map(e=>e.trim()).filter(e=>e);if(1===l.length){const r=l[0],c=r.split(".").pop().toLowerCase(),p=`/images/private/${r}`,g=`/wsfile.html?file=${r}`;if(u.includes(c)){const y=await e(g);if(200!=y){s.innerHTML='\n        <div class="load-insert load-msg">\n            <img class="load-icon" src="images/error.svg">\n        </div>\n    ',s.classList.remove("loading-in-progress","loading"),s.classList.add("error-state");const f=s.querySelector(".load-insert");return void(f&&f.style.setProperty("--load-text",`"Error ${y}"`))}const h=document.createElement("video");h.className="tweet-video video-js vjs-default-skin",h.controls=!0,h.preload="metadata",h.style.pointerEvents="auto",h.style.display="none";const v=r.toLowerCase().endsWith(".m3u8");if(v){s.appendChild(h);const w=videojs(h,{techOrder:["html5"],sources:[{src:g,type:"application/x-mpegURL"}],controlBar:{pictureInPictureToggle:!1},errorDisplay:!1});w.ready(()=>{t(r,d);const e=()=>{const e=w.el().querySelector("video");let t=e.videoWidth||300,n=e.videoHeight||300;(t<=0||n<=0)&&(t=300,n=300);const o=300,l=300,i=t/n;let a,r;i>1?(a=o,r=o/i):(r=l,a=l*i);const c=w.el();c.style.width=`${a}px`,c.style.height=`${r}px`,c.style.minWidth="100px",e.style.width="100%",e.style.height="100%",s.classList.remove("loading-in-progress"),s.classList.remove("loading");const d=s.querySelector(".load-insert"),m=s.querySelectorAll("video, div");m.forEach(e=>{"none"===e.style.display&&(e.style.display="",d.remove())})},n=w.el().querySelector("video");n.addEventListener("loadedmetadata",e),setTimeout(e,3e3),n.addEventListener("loadeddata",e)}),w.on("error",()=>{window.capturedHttpStatus?i({status:window.capturedHttpStatus}):i({status:null})})}else h.src=g,s.innerHTML="",s.appendChild(h),h.onloadeddata=()=>{s.classList.remove("loading-in-progress"),s.classList.remove("loading"),t(r,d)};function i(e){const t=s.querySelector(".video-js");t&&t.parentNode.removeChild(t),window.player&&window.player.dispose&&(window.player.dispose(),window.player=null);const n={401:"401",403:"403",404:"404",415:"415",500:"500"};let o,l=e.status;l||(4===e.code?l=415:2===e.code&&(l=404)),o=l?n[l]||`Error ${l}`:"网络连接异常：无法加载视频",s.innerHTML='\n        <div class="load-insert load-msg">\n            <img class="load-icon" src="images/error.svg">\n        </div>\n    ',s.classList.remove("loading-in-progress","loading"),s.classList.add("error-state");const i=s.querySelector(".load-insert");i&&i.style.setProperty("--load-text",`"${o.replace(/"/g,'\\"')}"`)}}else fetch(p,{credentials:"include",headers:{"Cache-Control":"no-cache"}}).then(e=>{if(!e.ok){s.classList.remove("loading-in-progress"),s.classList.remove("loading"),s.innerHTML='<div class="load-insert"><img class="load-icon" src="images/error.svg"></div>';let t=s.querySelector(".load-insert");throw t.style.setProperty("--load-text",`"Error ${e.status}"`),new Error(`${e.status}`)}if(!m.includes(c)){s.innerHTML='<div class="load-insert load-msg"><img class="load-icon" src="images/error.svg"></div>',s.classList.remove("loading-in-progress"),s.classList.remove("loading");let e=s.querySelector(".load-insert");throw e.style.setProperty("--load-text",'"Error 500"'),new Error("500")}{const e=new Image;e.src=p,e.className="tweet-image",e.onload=()=>{s.innerHTML="",s.appendChild(e),t(r,d),s.classList.remove("loading-in-progress"),s.classList.remove("loading")},e.onerror=()=>{s.innerHTML='<div class="load-insert load-msg"><img class="load-icon" src="images/error.svg"></div>',s.classList.remove("loading-in-progress"),s.classList.remove("loading");let e=s.querySelector(".load-insert");e.style.setProperty("--load-text",'"Error 404"')}}}).catch(e=>{s.classList.remove("loading-in-progress"),s.classList.remove("loading"),s.innerHTML='<div class="load-insert load-msg"><img class="load-icon" src="images/error.svg"></div>';let t=s.querySelector(".load-insert");t.style.setProperty("--load-text",`"Error ${e.message}"`)})}else if(l.length>1){const M=l.every(e=>{const t=e.split(".").pop().toLowerCase();return m.includes(t)});if(!M){s.classList.remove("loading-in-progress"),s.classList.remove("loading"),s.innerHTML='<div class="load-insert load-msg"><img class="load-icon" src="images/error.svg"></div>';let T=s.querySelector(".load-insert");return void T.style.setProperty("--load-text",'"Error 500"')}const L=document.createElement("div");L.className="multi-image-container";let E=l.length,b=0;function a(){if(b===E){s.classList.remove("loading-in-progress"),s.classList.remove("loading"),s.innerHTML="";const e=L.children.length;if(e>0)s.appendChild(L),l.length>0&&t(l[0],d);else{s.innerHTML='<div class="load-insert load-msg"><img class="load-icon" src="images/error.svg"></div>';let e=s.querySelector(".load-insert");e.style.setProperty("--load-text",'"Error 401"')}}}l.forEach(e=>{const t=`/images/private/${e}`,n=new Image;n.src=t,n.className="tweet-image",n.onload=()=>{L.appendChild(n),b++,a()},n.onerror=()=>{b++,a()}})}})});const p=document.querySelectorAll(".trans-button");p.forEach(e=>{e.addEventListener("click",()=>{const t=e.nextElementSibling;document.querySelectorAll(".tweet-text.trans").forEach(e=>{e.style.display="none"}),document.querySelectorAll(".trans-button").forEach(e=>{e.style.display="block"}),t.style.display="block",e.style.display="none"})});const g=n();document.querySelectorAll(".tweet-content").forEach(e=>{const n=document.createElement("div");n.className="tweet-actions";const o=.005+.845*Math.random(),s=.975+Math.random()*(1.247-.975),l=Math.round(g*o),i=Math.round(g*s),a=Math.random(),r=a<.5?2*a:2*(1-a),c=Math.round(512*(1-r));n.innerHTML=`\n            <div class="action-item">\n            <svg viewBox="0 0 24 24" aria-hidden="true" class="acomment"><g><path d="M12 2.59l5.7 5.7-1.41 1.42L13 6.41V16h-2V6.41l-3.3 3.3-1.41-1.42L12 2.59zM21 15l-.02 3.51c0 1.38-1.12 2.49-2.5 2.49H5.5C4.11 21 3 19.88 3 18.5V15h2v3.5c0 .28.22.5.5.5h12.98c.28 0 .5-.22.5-.5L19 15h2z"></path></g></svg>\n                <span class="action-count">${t(c)}</span>\n            </div>\n            <div class="action-item">\n                <svg viewBox="0 0 24 24" aria-hidden="true" class="alike">\n                    <g><path d="M16.697 5.5c-1.222-.06-2.679.51-3.89 2.16l-.805 1.09-.806-1.09C9.984 6.01 8.526 5.44 7.304 5.5c-1.243.07-2.349.78-2.91 1.91-.552 1.12-.633 2.78.479 4.82 1.074 1.97 3.257 4.27 7.129 6.61 3.87-2.34 6.052-4.64 7.126-6.61 1.111-2.04 1.03-3.7.477-4.82-.561-1.13-1.666-1.84-2.908-1.91zm4.187 7.69c-1.351 2.48-4.001 5.12-8.379 7.67l-.503.3-.504-.3c-4.379-2.55-7.029-5.19-8.382-7.67-1.36-2.5-1.41-4.86-.514-6.67.887-1.79 2.647-2.91 4.601-3.01 1.651-.09 3.368.56 4.798 2.01 1.429-1.45 3.146-2.1 4.796-2.01 1.954.1 3.714 1.22 4.601 3.01.896 1.81.846 4.17-.514 6.67z"></path></g>\n                </svg>\n                <span class="action-count">${t(l)}</span>\n            </div>\n            <div class="action-item">\n                <svg viewBox="0 0 24 24" aria-hidden="true" class="avisit">\n                    <g><path d="M8.75 21V3h2v18h-2zM18 21V8.5h2V21h-2zM4 21l.004-10h2L6 21H4zm9.248 0v-7h2v7h-2z"></path></g>\n                </svg>\n                <span class="action-count">${t(i)}</span>\n            </div>\n        `,e.appendChild(n)}),document.querySelectorAll(".alike").forEach(e=>{e.addEventListener("click",e=>{const t=document.createElement("div");t.className="floating-plus1",t.innerHTML='\n  <svg viewBox="0 0 24 24" aria-hidden="true" class="alike pinkh">\n                    <g><path d="M16.697 5.5c-1.222-.06-2.679.51-3.89 2.16l-.805 1.09-.806-1.09C9.984 6.01 8.526 5.44 7.304 5.5c-1.243.07-2.349.78-2.91 1.91-.552 1.12-.633 2.78.479 4.82 1.074 1.97 3.257 4.27 7.129 6.61 3.87-2.34 6.052-4.64 7.126-6.61 1.111-2.04 1.03-3.7.477-4.82-.561-1.13-1.666-1.84-2.908-1.91zm4.187 7.69c-1.351 2.48-4.001 5.12-8.379 7.67l-.503.3-.504-.3c-4.379-2.55-7.029-5.19-8.382-7.67-1.36-2.5-1.41-4.86-.514-6.67.887-1.79 2.647-2.91 4.601-3.01 1.651-.09 3.368.56 4.798 2.01 1.429-1.45 3.146-2.1 4.796-2.01 1.954.1 3.714 1.22 4.601 3.01.896 1.81.846 4.17-.514 6.67z"></path></g>\n                </svg>\n';const n=Math.floor(41*Math.random())-20;t.style.setProperty("--float-x",`${n}px`),t.style.left=`${e.pageX}px`,t.style.top=`${e.pageY}px`,document.body.appendChild(t),setTimeout(()=>{t.remove()},1e3)})})});const lazyImages=document.querySelectorAll(".lazyload"),observer=new IntersectionObserver((e,t)=>{e.forEach(e=>{if(e.isIntersecting){const n=e.target,o=n.dataset.src;fetch(o).then(e=>e.blob()).then(e=>{const t=URL.createObjectURL(e);n.src=t,n.onload=()=>{URL.revokeObjectURL(t),n.classList.remove("lazyload")}}).catch(e=>{console.error("Error loading image:",e)}),t.unobserve(n)}})});lazyImages.forEach(e=>{observer.observe(e)});let currentPlayer=null,currentAudio=null,animationId=null,minLoadTimer=null;document.querySelectorAll(".player").forEach(e=>{const t=e.querySelector(".bars"),n=t.querySelectorAll(".bar"),o=e.querySelector("audio"),s=e.querySelector(".play-icon"),l=o.getAttribute("data-media");e.addEventListener("click",()=>{const i=currentPlayer===e;if(i)stopAnimation();else{stopAnimation(),currentPlayer=e,currentAudio=o,s.innerHTML='<img class="load-audio-icon" src="/images/load2.svg">';let r=!1,c=!1;const d=()=>{r=!0,a()};function a(){if(r&&c){const e=o.play();void 0!==e?e.then(()=>{startRandomAnimation(t,n,s)}).catch(e=>{console.warn("音频播放被阻止或出错",e)}):startRandomAnimation(t,n,s)}}o._onReady=d,o.addEventListener("canplay",d,{once:!0}),minLoadTimer=setTimeout(()=>{c=!0,a()},5e3),o.src=l,o.load()}}),o.addEventListener("ended",()=>{stopAnimation()})});const badge=document.querySelector(".original"),tooltip=document.getElementById("badge-tooltip");if(badge.addEventListener("click",e=>{e.stopPropagation(),"block"===tooltip.style.display?hideTooltip():showTooltip()}),document.addEventListener("click",e=>{tooltip.contains(e.target)||e.target===badge||hideTooltip()}),window.addEventListener("resize",()=>{"block"===tooltip.style.display&&positionTooltip()}),document.addEventListener("click",async function(e){const t=e.target.closest(".acomment");if(!t)return;const n=t.closest(".tweet");if(!n)return;const o=n.dataset.tweetId||"",s=n.querySelector(".tweet-text")?.innerHTML||"",l=n.querySelector(".tweet-text.trans")?.innerHTML||"",i=document.getElementById("post-actions");i&&(i.style="none");const a=document.getElementById("capture-area"),r='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 392 392">\n  <defs>\n    <style>\n      .st3 {\n        stroke-miterlimit: 10;\n        stroke-width: 5px;      \n        fill: none;\n        stroke: #a20000;\n      }\n\n      .st4 {\n        fill: #a20000;\n      }\n    </style>\n  </defs>\n  <g>\n    <circle class="st3" cx="195.88" cy="196.59" r="127.56"/>\n  </g>\n  <g>\n    <circle class="st3" cx="195.88" cy="196.59" r="190.91"/>\n    <g>\n      <path class="st4" d="M98.19,344.82l21.57-33.57,3.46,2.23-21.57,33.57-3.46-2.23ZM107.99,306.23l2.07-3.22,24.67,15.89-2.07,3.22-24.67-15.89Z"/>\n      <path class="st4" d="M125.15,360.04l13.49-39.37,3.9,1.33-13.49,39.37-3.9-1.33ZM133.26,344.22l1.24-3.62,13.42,4.6c2.22.76,4.24.66,6.06-.3,1.82-.96,3.14-2.6,3.95-4.92.8-2.33.77-4.43-.08-6.3-.85-1.87-2.39-3.19-4.63-3.96l-13.42-4.6,1.24-3.63,13.2,4.52c2.29.78,4.13,1.94,5.52,3.48,1.39,1.53,2.27,3.31,2.63,5.33.37,2.02.16,4.18-.63,6.47-.78,2.27-1.94,4.1-3.48,5.47-1.54,1.38-3.32,2.25-5.35,2.61-2.03.36-4.19.15-6.48-.63l-13.2-4.52ZM149.17,368.26l-2.89-20.94h4.02s3.52,22.54,3.52,22.54l-4.65-1.59Z"/>\n      <path class="st4" d="M167.93,372.8l17.69-40.65,4.97.28,12.93,42.38-4.57-.26-11.09-37.95-15.35,36.46-4.57-.26ZM175.56,363.12l.22-3.83,21.84,1.23-.22,3.83-21.85-1.23Z"/>\n      <path class="st4" d="M232.33,370.78c-1.98.42-3.88.62-5.7.62s-3.57-.22-5.25-.65-3.3-1.06-4.86-1.9l1.76-3.7c2.03,1.13,4.15,1.86,6.35,2.17s4.5.22,6.91-.29c3.51-.74,6.07-2,7.68-3.78,1.61-1.78,2.15-3.92,1.62-6.42v-.03c-.37-1.7-1.11-2.91-2.23-3.62-1.13-.72-2.49-1.15-4.09-1.3s-3.31-.21-5.14-.18c-1.69.02-3.39.02-5.11-.02-1.71-.04-3.32-.27-4.82-.68s-2.8-1.18-3.89-2.28c-1.09-1.11-1.86-2.71-2.31-4.82v-.03c-.81-3.79-.17-6.99,1.91-9.59,2.08-2.61,5.41-4.4,10-5.36,2.16-.46,4.36-.55,6.59-.29,2.23.26,4.5.9,6.82,1.91l-1.71,3.66c-2.01-.86-3.92-1.42-5.73-1.67s-3.53-.21-5.17.14c-3.32.7-5.75,1.93-7.28,3.71-1.54,1.77-2.03,3.94-1.49,6.5v.03c.36,1.68,1.15,2.85,2.37,3.51,1.22.66,2.71,1.04,4.45,1.14,1.75.1,3.58.14,5.51.13,1.63-.01,3.27.03,4.9.14,1.63.11,3.15.4,4.56.88,1.41.48,2.62,1.29,3.64,2.41,1.02,1.12,1.74,2.69,2.16,4.7v.06c.81,3.75.11,6.93-2.07,9.53-2.18,2.6-5.64,4.4-10.38,5.4Z"/>\n      <path class="st4" d="M264.9,360.84l-19.22-36.88,3.65-1.91,19.22,36.87-3.65,1.91ZM258.77,343.09l-1.84-3.53,21.98-11.48,1.84,3.52-21.98,11.48ZM287.35,349.1l-19.22-36.88,3.65-1.91,19.22,36.87-3.65,1.91Z"/>\n    </g>\n    <g>\n      <path class="st4" d="M81.38,126.64l-35.15-27.66,2.74-3.48,35.15,27.66-2.74,3.48ZM98.25,105.23l-35.15-27.66,2.74-3.48,35.15,27.66-2.74,3.48ZM67.54,111.94l-3.36-2.64,16.51-20.95,3.36,2.64-16.51,20.95Z"/>\n      <path class="st4" d="M84.17,58.04l28.5,34.47-3.41,2.82-28.5-34.47,3.41-2.82Z"/>\n      <path class="st4" d="M123.3,58.38l13.71-7.24,3.07,5.82c1.74,3.3,2.68,6.32,2.81,9.06.13,2.74-.54,5.19-2.01,7.36-1.48,2.17-3.75,4.07-6.84,5.7-3.12,1.65-5.99,2.51-8.6,2.58-2.62.07-4.99-.65-7.11-2.18-2.12-1.52-4-3.83-5.64-6.94l-6.15-11.67c-1.74-3.3-2.67-6.32-2.8-9.04-.13-2.73.55-5.18,2.02-7.35,1.48-2.17,3.75-4.07,6.84-5.7,2.56-1.35,4.99-2.08,7.3-2.18,2.31-.11,4.51.4,6.6,1.51,2.09,1.11,4.09,2.85,5.98,5.21l-4.24,2.24c-2.11-2.34-4.31-3.77-6.59-4.29-2.28-.52-4.65-.13-7.12,1.17-3.32,1.75-5.32,3.99-5.99,6.71-.67,2.72-.03,5.94,1.93,9.66l6.15,11.67c1.82,3.45,4.01,5.58,6.59,6.4,2.58.82,5.55.34,8.92-1.44,3.25-1.71,5.21-3.89,5.88-6.52s0-5.86-2.01-9.69l-1.19-2.26-9.57,5.06-1.92-3.65Z"/>\n      <path class="st4" d="M154.52,68.92l-8.66-43.88,4.35-.85,8.66,43.88-4.35.85ZM153.58,48.76l-.83-4.19,26.17-5.14.83,4.19-26.17,5.14ZM181.27,63.66l-8.66-43.88,4.35-.85,8.66,43.88-4.35.85Z"/>\n      <path class="st4" d="M195.17,44.94l20.63,1.28-.26,4.11-20.63-1.27.26-4.11Z"/>\n      <path class="st4" d="M222.88,65.42l13.32-42.7,4.23,1.32-13.32,42.7-4.23-1.32ZM225.79,66.33l1.23-3.94,24.52,7.64-1.23,3.94-24.52-7.64ZM231.79,47.09l1.23-3.94,21.29,6.64-1.23,3.94-21.29-6.64ZM237.88,27.57l1.23-3.94,24.52,7.64-1.23,3.94-24.52-7.64Z"/>\n      <path class="st4" d="M256.4,76.69l24.9-37.12,3.7,2.49-.89,47.95-.82-2.03,21.76-32.45,3.68,2.47-24.9,37.12-3.75-2.52.63-48.49,1.02,2.79-21.64,32.27-3.68-2.47Z"/>\n      <path class="st4" d="M290.04,101.13l34.8-28.1,2.78,3.44-34.8,28.1-2.78-3.45ZM292.7,104.43l3.21-2.59,6.36,7.87c2.6,3.22,5.31,5.03,8.11,5.41s5.72-.65,8.75-3.09l10.24-8.27c3.03-2.45,4.65-5.08,4.87-7.9.21-2.82-.98-5.84-3.59-9.06l-6.36-7.87,3.21-2.59,6.25,7.73c3.58,4.43,5.22,8.59,4.92,12.45s-2.54,7.48-6.7,10.84l-9.86,7.96c-2.78,2.24-5.48,3.62-8.12,4.12-2.64.51-5.21.15-7.72-1.06-2.51-1.21-4.96-3.3-7.34-6.25l-6.23-7.7Z"/>\n    </g>\n    <g>\n      <path class="st3" d="M31.36,222.69l-1.04-3.19-3.41.74c-.48.1-.97.15-1.46.15-2.34.02-4.52-1.19-5.74-3.19-1.48-2.39-1.13-5.48.84-7.48l2.36-2.44-2.36-2.44c-1.97-2-2.32-5.09-.84-7.48,1.22-2,3.4-3.21,5.74-3.19.49,0,.98.05,1.46.16l3.41.73,1.04-3.18c.86-2.66,3.41-4.44,6.35-4.44s5.48,1.79,6.35,4.44l1.04,3.18,3.41-.73c.48-.11.97-.16,1.46-.16,2.38,0,4.53,1.19,5.74,3.19,1.47,2.39,1.13,5.48-.84,7.48l-2.36,2.44,2.36,2.44c1.98,2.04,2.31,5.05.84,7.48-1.22,2-3.4,3.21-5.74,3.19-.49,0-.97-.05-1.46-.15l-3.41-.74-1.03,3.19c-.86,2.65-3.42,4.44-6.35,4.44s-5.48-1.79-6.35-4.44ZM31.36,222.69l-1.04-3.19-3.41.74c-.48.1-.97.15-1.46.15-2.34.02-4.52-1.19-5.74-3.19-1.48-2.39-1.13-5.48.84-7.48l2.36-2.44-2.36-2.44c-1.97-2-2.32-5.09-.84-7.48,1.22-2,3.4-3.21,5.74-3.19.49,0,.98.05,1.46.16l3.41.73,1.04-3.18c.86-2.66,3.41-4.44,6.35-4.44s5.48,1.79,6.35,4.44l1.04,3.18,3.41-.73c.48-.11.97-.16,1.46-.16,2.38,0,4.53,1.19,5.74,3.19,1.47,2.39,1.13,5.48-.84,7.48l-2.36,2.44,2.36,2.44c1.98,2.04,2.31,5.05.84,7.48-1.22,2-3.4,3.21-5.74,3.19-.49,0-.97-.05-1.46-.15l-3.41-.74-1.03,3.19c-.86,2.65-3.42,4.44-6.35,4.44s-5.48-1.79-6.35-4.44Z"/>\n      <path class="st4" d="M47.15,207.29c0-4.97-4.24-9.02-9.45-9.02s-9.45,4.05-9.45,9.02,4.24,9.02,9.45,9.02,9.45-4.05,9.45-9.02ZM37.7,211.56c-2.47,0-4.48-1.92-4.48-4.28s2.01-4.28,4.48-4.28,4.48,1.92,4.48,4.28-2.01,4.28-4.48,4.28Z"/>\n    </g>\n    <g>\n      <path class="st3" d="M349.45,222.69l-1.04-3.19-3.41.74c-.48.1-.97.15-1.46.15-2.34.02-4.52-1.19-5.74-3.19-1.48-2.39-1.13-5.48.84-7.48l2.36-2.44-2.36-2.44c-1.97-2-2.32-5.09-.84-7.48,1.22-2,3.4-3.21,5.74-3.19.49,0,.98.05,1.46.16l3.41.73,1.04-3.18c.86-2.66,3.41-4.44,6.35-4.44s5.48,1.79,6.35,4.44l1.04,3.18,3.41-.73c.48-.11.97-.16,1.46-.16,2.38,0,4.53,1.19,5.74,3.19,1.47,2.39,1.13,5.48-.84,7.48l-2.36,2.44,2.36,2.44c1.98,2.04,2.31,5.05.84,7.48-1.22,2-3.4,3.21-5.74,3.19-.49,0-.97-.05-1.46-.15l-3.41-.74-1.03,3.19c-.86,2.65-3.42,4.44-6.35,4.44s-5.48-1.79-6.35-4.44ZM349.45,222.69l-1.04-3.19-3.41.74c-.48.1-.97.15-1.46.15-2.34.02-4.52-1.19-5.74-3.19-1.48-2.39-1.13-5.48.84-7.48l2.36-2.44-2.36-2.44c-1.97-2-2.32-5.09-.84-7.48,1.22-2,3.4-3.21,5.74-3.19.49,0,.98.05,1.46.16l3.41.73,1.04-3.18c.86-2.66,3.41-4.44,6.35-4.44s5.48,1.79,6.35,4.44l1.04,3.18,3.41-.73c.48-.11.97-.16,1.46-.16,2.38,0,4.53,1.19,5.74,3.19,1.47,2.39,1.13,5.48-.84,7.48l-2.36,2.44,2.36,2.44c1.98,2.04,2.31,5.05.84,7.48-1.22,2-3.4,3.21-5.74,3.19-.49,0-.97-.05-1.46-.15l-3.41-.74-1.03,3.19c-.86,2.65-3.42,4.44-6.35,4.44s-5.48-1.79-6.35-4.44Z"/>\n      <path class="st4" d="M365.25,207.29c0-4.97-4.24-9.02-9.45-9.02s-9.45,4.05-9.45,9.02,4.24,9.02,9.45,9.02,9.45-4.05,9.45-9.02ZM355.8,211.56c-2.47,0-4.48-1.92-4.48-4.28s2.01-4.28,4.48-4.28,4.48,1.92,4.48,4.28-2.01,4.28-4.48,4.28Z"/>\n    </g>\n    <path class="st4" d="M183.15,116.19c11.54-6.35,26.06-3.41,34.6,6.33,3.95,4.5,7.09,9.73,10.36,14.78,10.72,16.59,21.34,33.24,31.96,49.89,2.86,4.49,2.29,7.24-1.97,10.5-.75.57-1.53,1.13-2.35,1.59-6.37,3.58-7.97,3.19-11.87-2.85-13.93-21.55-27.91-43.07-41.77-64.67-4.04-6.29-9.57-10.7-16.09-14.07-.82-.42-1.64-.86-2.85-1.5ZM128.26,217.25c-4.05-8.29-4.57-16.19-.09-23.32,9.49-15.12,19.66-29.81,29.55-44.69,5.63-8.47,11.35-16.88,16.8-25.46,1.64-2.58,3.55-3.11,5.84-1.77,3.8,2.22,7.39,4.79,10.79,7.03-13.29,20.73-26.14,40.67-38.86,60.7-2.9,4.58-5.29,9.48-8,14.18-.48.84-1.29,1.69-2.16,2.08-5.36,2.43-10.16,5.55-13.87,11.25ZM233.11,243.05c-9.29,6.38-18.24,12.53-27.68,19.02-.13-1.56-.29-2.55-.29-3.55-.02-13.74.08-27.49-.07-41.23-.04-3.39,1.04-4.58,4.48-4.51,9.36.19,18.72-.18,28.07.13,10.32.34,18.58-3.71,25.73-10.73.66-.64,1.34-1.26,2.04-1.94,2.79,5.31,1.17,14.48-3.91,19.75-5.65,5.85-12.3,9.93-20.93,9.62-4.5-.16-9,.03-13.5-.03-2.2-.03-3.34.76-3.2,3.11.17,2.94-.83,6.72.64,8.59,1.3,1.66,5.29,1.2,8.62,1.76ZM187.54,261.57c-8.93-6.3-17.86-12.6-27.68-19.52h9.39v-11.89c-12.1-.57-25.1,2.06-35.73-7.32,2.83-5.11,7.24-8.25,11.84-11.15.51-.32,1.35-.27,2.01-.21,6.44.6,12.86,1.53,19.31,1.79,6.26.25,12.54-.12,18.81-.35,2.18-.08,3.35.43,3.34,2.86-.04,15.13-.02,30.27-.02,45.41-.42.13-.84.26-1.26.39Z"/>\n  </g>\n</svg>';a.innerHTML=`\n    <div style="\n        max-width: 500px;\n        width: 100%;\n        min-height: 100px;\n        padding: 24px;\n        background-color: #fffbda !important; /* 强制白色 */\n        color: #111111 !important;           /* 强制深色文字 */\n        font-family: 'Noto Serif SC', 'Georgia', 'Times New Roman', serif;\n        position: relative;\n        overflow: hidden;                     /* 强制裁剪溢出的内容 */\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n    ">\n        <div style="position: relative; z-index: 2;padding:28px 8px;">\n            <div id="original-text" style="font-size: 24px; line-height:1.8;">${s}</div>\n            <div dir="rtl" style="font-size: 20px; margin-top:8px; line-height:1.8; font-style: italic;">${l}</div>\n        </div>\n\n        <div style="\n            position: absolute;\n            top: 50%;\n            left: 50%;\n            width: 150px;  /* 固定大小，可根据需要调整 */\n            height: 150px;\n            transform: translate(-50%, -50%) rotate(45deg); /* 逆时针旋转45度并居中 */\n            z-index: 1;\n            opacity: 0.2; /* 控制印章透明度以免干扰阅读 */\n            pointer-events: none;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n        ">\n            ${r}\n        </div>\n    </div>\n  `;const c=a.querySelector("#original-text");if(c){const e=c.innerText.trim(),t=window.getComputedStyle(c),n=parseFloat(t.fontSize),o=c.clientWidth,s=Math.floor(o/n);e.length<=s&&(c.style.textIndent="0")}const d=await html2canvas(a.querySelector("div")),m=d.toDataURL("image/png"),u=document.getElementById("preview-modal"),p=document.getElementById("preview-image-container"),g=document.getElementById("download-btn"),y=document.querySelector(".qq-titlebar-button.close"),h=document.getElementById("shareimage");p.innerHTML=`<img src="${m}" style="width: 100%;display:block;" />`,p.style.backgroundPosition="center",new MutationObserver((e,t)=>{let n=document.getElementById("post-actions");n&&(n.style.display="none",t.disconnect())}).observe(document.body,{childList:!0,subtree:!0}),u.style.display="flex",document.body.style.overflow="hidden",document.getElementById("preview-modal").style.display="flex",h.style.display="block",g.onclick=()=>{const e=document.createElement("a");e.download=`tweet${o}.png`,e.href=m,e.click(),document.body.style.overflow="",document.getElementById("preview-modal").style.display="none"},y.onclick=()=>{document.body.style.overflow="",document.getElementById("preview-modal").style.display="none"}}),window.innerWidth,window.innerWidth>767){const e=10;let t=[];const n=new Date;let o=new Date(Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()));const s=new Date(o);s.setUTCDate(o.getUTCDate()-30);const l=e=>`${e.getUTCFullYear()}-${String(e.getUTCMonth()+1).padStart(2,"0")}-${String(e.getUTCDate()).padStart(2,"0")}`,i=async(e,t)=>{const n=await fetch(`https://api.nasa.gov/planetary/apod?api_key=FM6Cr0TNJj2lslol2rk1x2WkkZoqM590P9R2j1Xb&start_date=${l(e)}&end_date=${l(t)}`),o=await n.json();return o.filter(e=>"image"===e.media_type&&new Date(e.date)<=t)},a=async()=>{let n=o,l=new Date(n);for(l.setUTCDate(n.getUTCDate()-9);t.length<e&&l>=s;){try{const e=await i(l,n);t=[...e,...t]}catch(e){console.error("APOD fetch error:",e);break}n=new Date(l),l.setUTCDate(n.getUTCDate()-9),l<s&&(l=new Date(s))}if(t.length){const e=t[Math.floor(Math.random()*t.length)];document.documentElement.style.setProperty("--bg-url",`url(${e.url})`)}};a()}document.addEventListener("DOMContentLoaded",controlTabsByTweetCount);